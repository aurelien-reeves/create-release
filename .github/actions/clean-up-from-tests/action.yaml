name: 'Clean up from tests'
description: 'Delete any existing data created by the tests'
inputs:
  github-token:
    description: "Github token to use when calling GitHub API"
    default: ""
runs:
  using: "composite"
  steps:

    - name: Delete Release
      run: |
        expected_name="vT.E.S.T"
        release=$(gh release list | grep $expected_name | cut -f1)
        [ $release ] & gh release delete $release
        git push origin :refs/heads/develop
        git push origin :refs/heads/release/test
        git push origin :refs/tags/vT.E.S.T
      env: 
        GITHUB_TOKEN: ${{ inputs.github-token }}
      shell: bash

    - name: Delete tags / branches
      run: |
        git push origin :refs/heads/develop
        git push origin :refs/heads/release/test
        git push origin :refs/tags/vT.E.S.T
      shell: bash